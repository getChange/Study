# 组件
## 什么是组件
- 组件(Component)扩展HTML元素,封装可重用代码;添加特殊功能;可以是原生HTML元素形式,以JS特性扩展

## 使用组件
### 注册
- 创建一个Vue实例
```javascript
new Vue({
    el:"#app",
    //options
})
```
- 全局组件`Vue.Component(tagName,options)`
```javascript
Vue.component('my-component',{
    //选项
})
```
- 确保在初始化根实例**之前**注册组件
```html
<div id="example">
  <my-component></my-component>
</div>
```
```javascript
// 注册
Vue.component('my-component', {
  template: '<div>A custom component!</div>'
})
// 创建根实例
new Vue({
  el: '#example'
})
```
```html
<!--渲染结果-->
<div id="example">
  <div>A custom component!</div>
</div>
```
### 局部注册
- 可以通过使用组件实例选项注册,使组件仅在另一个案例/组件的作用域中可用:
```javascript
var Child = {
    template:'<div>A custom component</div>'
}

new Vue({
    el:"#app",
    components:{
        //<my-component></my-component>将只在父模板可用
        'my-component':Child
    }
})
```
- 适用于其他可注册的Vue功能,如指令

### DOM模板解析说明
- 使用DOM作为模板时,会受到`HTML`的限制,`Vue`只有在浏览器解析和标准化之后才能获取模板内容
- `ul`,`ol`,`table`,`select`限制了能被它包裹的元素
- 在自定义组件中使用这些受限制的元素时会导致一些问题，例如：
```html
<table>
  <my-row>...</my-row>
</table>
```
- 自定义组件 <my-row> 被认为是无效的内容，因此在渲染的时候会导致错误。
- 变通的方案是使用特殊的 `is` 属性：
```javascript
<table>
  <tr is="my-row"></tr>
</table>
```
- 注意，使用来自以下来源之一的字符串模板，这些限制将不适用：
    - `<script type="text/x-template">`
    - JavaScript内联模版字符串
    - `.vue` 组件
- `有必要的话请使用字符串模版。`
### data必须是函数
- 错误的示范方法
```javascript
Vue.component("my-component", {
    template: '<span> {{message}} </span>',
    data: {
        message: "hello"
    }
})
```
- `Vue`会停止并在控制台发出警告,`data`必须是一个函数

- 假设如下绕开警告:
```javascript
 var data = {counter: 0}

Vue.component("simple-counter", {
    template: '<button v-on:click="counter +=1">{{counter}}</button>',
    data: function () {
        return data;
    }
})

new Vue({
    el: "#app2"
})
```
- 现在实例就可以输出了,由于三个组件都使用的是一个`data`,所以增加一个`counter`会影响所有组件!但我们需要每个组件返回全新的`data`对象
```javascript
//改进后的代码
data: function () {
    return {
        counter: 0
    };
}
```

### 组成构件
- 组件-协同工作:组件A使用了组件B,必然相互通信,A给B传送数据,B将它内部发生的事件告诉A.这就涉及到解耦
- 在`Vue`中,父子组件的关系可以总结为`props down`,`events up` ;父组件通过`props`向下传递数据给子组件,子组件通过`events`给父组件发送消息

## Prop
### 使用`Prop`传递数据
- 组件的作用域是`孤立的`,不能在子组件的模板内直接引用父组件的数据.想要让子组件使用父组件数据,需要通过子组件的`props`选项
- 子组件要显示的用`props`选项声明它期待获得的数据:
```javascript
Vue.component('child',{
    //声明 props
    props: [ 'message' ],
    //就像data一样,props可以用在模板内
    //在vm实例中像"this.message"这样使用
    template: '<span>{{message}}</span>'
})
```
```html
<child message = "hello"></child>
```