### js原生实现双向数据绑定
- 第一种方式
- js
```javascript
function DataBinder( object_id ) {
    // Create a simple PubSub object
    var pubSub = {
                callbacks: {},
                on: function( msg, callback ) {
                    this.callbacks[ msg ] = this.callbacks[ msg ] || [];
                    this.callbacks[ msg ].push( callback );
                },
                publish: function( msg ) {
                    this.callbacks[ msg ] = this.callbacks[ msg ] || [];
                    for ( var i = 0, len = this.callbacks[ msg ].length; i < len; i++ ) {
                        this.callbacks[ msg ][ i ].apply( this, arguments );
                    }
                }
            },
            data_attr = "data-bind-" + object_id,
            message = object_id + ":input",
            timeIn;
            changeHandler = function( evt ) {
                var target = evt.target || evt.srcElement, // IE8 compatibility
                        prop_name = target.getAttribute( data_attr );
                if ( prop_name && prop_name !== "" ) {
                    clearTimeout(timeIn);
                    timeIn = setTimeout(function(){
                        pubSub.publish( message, prop_name, target.value );
                    },50);

                }
            };
    // Listen to change events and proxy to PubSub
    if ( document.addEventListener ) {
        document.addEventListener( "input", changeHandler, false );
    } else {
        // IE8 uses attachEvent instead of addEventListener
        document.attachEvent( "oninput", changeHandler );
    }
    // PubSub propagates changes to all bound elements
    pubSub.on( message, function( evt, prop_name, new_val ) {
        var elements = document.querySelectorAll("[" + data_attr + "=" + prop_name + "]"),tag_name;
        for ( var i = 0, len = elements.length; i < len; i++ ) {
            tag_name = elements[ i ].tagName.toLowerCase();

            if ( tag_name === "input" || tag_name === "textarea" || tag_name === "select" ) {
                elements[ i ].value = new_val;
            } else {
                elements[ i ].innerHTML = new_val;
            }
        }
    });
    return pubSub;
}
function DBind( uid ) {
    var binder = new DataBinder( uid ),
    user = {
        // ...
        attributes: {},
        set: function( attr_name, val ) {
            this.attributes[ attr_name ] = val;
            // Use the `publish` method
            binder.publish( uid + ":input", attr_name, val, this );
        },
        get: function( attr_name ) {
            return this.attributes[ attr_name ];
        },

        _binder: binder
    };
    // Subscribe to the PubSub
    binder.on( uid + ":input", function( evt, attr_name, new_val, initiator ) {
        if ( initiator !== user ) {
            user.set( attr_name, new_val );
        }
    });
    return user;
}
```
- html
```html
<input type="text" data-bind-1="name" />
<span data-bind-1="name"></span>
```
- js
```javascript
var DBind = new DBind( 1 );
DBind.set( "name", "黄奇" );
```
- 第二种方式
- html
```html
<input  ng-model type="text">
<p ng-bind></p>
```
- js
```javascript
var $scope = {name:'小红'}
// 1.当前打页面时，页面有小红值
var oIp = document.querySelector('[ng-model]')
oIp.value = $scope.name
// 2.改变文本框值时$scope.name也变
// 文本框有input事件
oIp.oninput = function(e){
    $scope.name =  e.target.value
    // 获取拥有ng-bind属性的元素
    // 设置它的innerHTML值
    document.querySelector('[ng-bind]').innerHTML = $scope.name
}
```
### 正则表达式
- 实现将数字千分制
```javascript
str.replace( /\B(?=(?:\d{3})+$)/g, ',' );
/*
* 逗号替换了 \B (非文字边界，匹配位置的左右两边都是 \w）
* (?=(?:\d{3})+$) 里的 (?= ) 部分表示匹配一个位置，这个位置之后的内容符合这个括号里的条件，也就是 (?:\d{3})+$
* (?:\d{3})+$ 表示一串长度可以被三整除的数字直至末尾
* 如果拿这个正则表达式匹配 123456789，匹配的步骤如下：
* "123,456798" （3 和 4 中间的位置是 \B，且之后的一串数字长度为三的倍数）;
* "123,456,789" （6 和 7 中间的位置满足）;
* /
```


# javascript的学习
## 1.变量
- 用于存放数值的容器;独特之处在于它存放的数值是可以改变的