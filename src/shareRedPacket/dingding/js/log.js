!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){b.exports=function(a,b){for(var c,d=[],e=["custom","error","performance","retCode","speed","log"],f=0,g=function(a){return function(){d.push({type:a,params:Array.prototype.slice.call(arguments)})}};c=e[f++];)a[c]=g(c);a.reloaded=function(){a.ready();for(var b=0,c=d.length;c>b;b++)a[d[b].type].apply(a,d[b].params)},a.reloadFailed=function(){"function"==typeof b&&b()}}},{}],2:[function(a,b,c){b.exports=function(a,b){var c,d;if(a.startTime)c=a.startTime;else try{c=window.performance.timing.responseStart,d=new Date}catch(e){d=c=new Date-0}var f=function(b,c){c=c||a.config.sample,a.sampling(c)==(a.config.modVal||1)&&(b.sampling=c,a.send(b))};a.custom=function(a,c,d){var e={type:"custom"},g=["time","count"];a=g[a]||a,("time"==a||"count"==a)&&(e.category=a),e.type&&(e.key=c,e.value="time"==a?d:b,f(e))},a.error=function(a,b,c,d,e,g){var h={type:"jserror"};if(1===arguments.length&&(b=a,a=void 0),b){if(h.category=a||"sys","object"==typeof b)try{b=JSON.stringify(b)}catch(i){b=b}h.msg=b,c&&(h.file=c),d&&(h.line=d),e&&(h.col=e),g&&(h.stack=g),f(h,1)}},a.performance=function(b){var c={type:"per"};f(a.extend(c,b))},a.retCode=function(a,b,d,e,g){var h={type:"retcode",api:a,issucess:b,delay:"number"==typeof d?parseInt(d,10):new Date-c,msg:e||(b?"success":"fail"),detail:g||"",sampling:this.config.retCode[a]};"undefined"!=typeof h.delay&&f(h,b?h.sampling:1)};var g=function(){for(var b,c={type:"speed"},d=0,e=a.speed.points.length;e>d;d++)b=a.speed.points[d],b&&(c["s"+d]=b,a.speed.points[d]=null);f(c)};a.speed=function(b,e,f){var h;"string"==typeof b&&(b=parseInt(b.slice(1),10)),"number"==typeof b&&(h=a.speed.points||new Array(11),h[b]="number"==typeof e?e:new Date-c,h[b]<0&&(h[b]=new Date-d),a.speed.points=h),clearTimeout(a.speed.timer),f?g():a.speed.timer=setTimeout(g,3e3)},a.log=function(a,b){var c={type:"log",msg:a};f(c,b)}}},{}],3:[function(a,b,c){b.exports=function(a,b,c,d){var e={spm:a.getSpmId()},f=b.onerror,g={init:function(){this.lockPerformanceSpm(),this.sendPerformance(),this.bind(),/wpodebug\=1/.test(location.search)&&(a.config.sample=1,a.config.modVal=1,a.debug=!0)},bind:function(){a.on(b,"beforeunload",function(){a.clear(),a.speed.points&&a.speed(null,null,!0)},!0),b.onerror=function(b,c,d,e,g){f&&f(b,c,d,e,g);var h=g&&g.stack;c?a.error("sys",b,c,d,e,h):a.error(b)}},analyzeTiming:function(){var a={rrt:["responseStart","requestStart"],dns:["domainLookupEnd","domainLookupStart"],cnt:["connectEnd","connectStart"],ntw:["responseStart","fetchStart"],dct:["domContentLoadedEventStart","responseStart"],flt:["loadEventStart","responseStart"]};try{var b=performance.timing;for(var c in a){var d=b[a[c][1]],f=b[a[c][0]];if(d&&f){var g=f-d;g>=0&&864e5>g&&(e[c]=g)}}}catch(h){}return e},lockPerformanceSpm:function(){if(!e.spm){var a=function(){var a=d&&d.getSpmId&&d.getSpmId();a&&(e.spm=a)},b=function(){"complete"===document.readyState?a():document.addEventListener?(document.removeEventListener("DOMContentLoaded",b,!1),a()):"complete"===document.readyState&&(document.detachEvent("onreadystatechange",b),a())};document.addEventListener?document.addEventListener("DOMContentLoaded",b,!1):document.attachEvent&&document.attachEvent("onreadystatechange",b)}},sendPerformance:function(){var d=this;c?a.performance(d.analyzeTiming()):a.on(b,"load",function(){a.performance(d.analyzeTiming())},!0)}};g.init()}},{}],4:[function(a,b,c){var d=function(){return+new Date+Math.floor(1e3*Math.random())},e="",f=function(){var a=document.getElementsByTagName("meta"),b=[];if(e)return e;for(var c=0;c<a.length;c++){var d=a[c];d&&d.name&&("data-spm"==d.name||"spm-id"==d.name)&&b.push(d.content)}return document.body&&document.body.getAttribute("data-spm")&&b.push(document.body.getAttribute("data-spm")),b=b.length?b.join("."):0,b&&-1!==b.indexOf(".")&&(e=b),e};f.bind||(f.bind=function(){return f}),b.exports={sendRequest:function(a){var b=window,c="jsFeImage_"+d(),e=b[c]=new Image;e.onload=e.onerror=function(){b[c]=null},e.src=a,e=null},getCookie:function(){return document.cookie},getSpmId:f}},{}],5:[function(a,b,c){b.exports=function(a,b,c){var d,e,f={},g=0,h={imgUrl:"//retcode.taobao.com/r.png?",sample:10,modVal:1,dynamic:!1,retCode:{}},i=c.sendRequest,j=function(){for(var b,c;(b=l.dequeue())&&(c=l.extend({uid:d,userNick:a.getNick(),times:b.times?b.times:1,_t:~new Date+(g++).toString()},b),c.spm||(c.spm=a.getSpmId()),c.spm);)a.debug&&"object"==typeof window&&window.console&&console.log(c),i.call(a,h.imgUrl+l.query.stringify(c));e=null},k=function(a){a&&e&&(clearTimeout(e),j()),e||(e=setTimeout(j,1e3))},l={_key:"wpokey",ver:"0.2.11",requestQueue:a.requestQueue||[],getCookie:function(a){var b,d,e="";if(!f[a]){b=new RegExp(a+"=([^;]+)");try{e=c.getCookie(this)}catch(g){}d=b.exec(e),d&&(f[a]=d[1])}return f[a]},setCookie:function(a,b,c,d,e){var f=a+"="+b;d&&(f+="; domain="+d),e&&(f+="; path="+e),c&&(f+="; expires="+c),document.cookie=f},extend:function(a){for(var b,c=Array.prototype.slice.call(arguments,1),d=0,e=c.length;e>d;d++){b=c[d];for(var f in b)b.hasOwnProperty(f)&&(a[f]=b[f])}return a},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)})},send:function(b){if(b&&!a.config.disabled){var c=l.getSpmId();!b.spm&&c&&(b.spm=c),this.queue(b)}},query:{stringify:function(a){var b=[],c="";try{for(var d in a)a.hasOwnProperty(d)&&void 0!==a[d]&&b.push(d+"="+encodeURIComponent(a[d]));b.length>0&&(c=b.join("&"))}catch(e){}return c},parse:function(a){var b,c=a.split("&"),d={};try{for(var e=0,f=c.length;f>e;e++)b=c[e].split("="),d[b[0]]=decodeURIComponent(b[1])}catch(g){}return d}},getSpmId:function(){return h.spmId?h.spmId:"function"==typeof c.getSpmId?c.getSpmId.call(this):0},on:function(a,b,c,d){a.addEventListener?a.addEventListener(b,d?function(){a.removeEventListener(b,c,!1),c()}:c,!1):a.attachEvent&&a.attachEvent("on"+b,function(){d&&a.detachEvent("on"+b,arguments.callee),c()})},getNick:function(){var b="";try{a.config.nick?b=a.config.nick:(b=this.getCookie("_nk_")||this.getCookie("lgc")||this.getCookie("_w_tb_nick")||this.getCookie("sn")||"",b=decodeURIComponent(b))}catch(c){}return b},setConfig:function(a){if(a&&"object"!=typeof a)throw"args of wpo.setConfig is not object";return a&&a.user&&"function"==typeof a.user.getUserInfo&&"weex"===this.env&&a.user.getUserInfo(function(a){try{var b=JSON.parse(a);l.extend(h,{nick:b.info&&b.info.nick})}catch(c){}}),l.extend(h,a)},spm:function(a){return a&&this.setConfig({spmId:a}),this},dynamicConfig:function(a){var b=this.query.stringify(a);try{localStorage.setItem(this._key,b)}catch(c){this.setCookie(this._key,b,new Date(a.expTime))}this.setConfig({sample:parseInt(a.sample,10)}),this.ready()},ready:function(a){this._ready=!0;var b=!0;this._immediately=a||b,k()},queue:function(a){var b,c=this.requestQueue;if("jserror"===a.type){if(c.length&&(b=c[c.length-1],a.msg===b.msg))return void b.times++;a.times||(a.times=1)}c.push(a),this._ready&&(this._immediately&&"jserror"!==a.type?j():k())},dequeue:function(){return this.requestQueue.shift()},clear:function(){k(!0)}};return l.uid=d=l.guid(),l.config=l.setConfig(a.config),l.extend(a,l),b.__WPO=a,a}},{}],6:[function(a,b,c){!function(b){var c=a("./conf-browser"),d=b.__WPO||{},e=2,f=!1;d.env="browser",a("./core")(d,b,c);var g=function(){a("./sampling")(d),a("./apis")(d),a("./browser-performance")(d,b,f,c)};return d.config.dynamic&&!(e=a("./server-config")(d))?void a("./api-await")(d,function(){g(),d.reloaded&&d.reloaded()}):(2==e?d.on(b,"load",function(){d.ready()},!0):d.on(b,"load",function(){f=!0}),void g())}(window),b.exports=window.__WPO},{"./api-await":1,"./apis":2,"./browser-performance":3,"./conf-browser":4,"./core":5,"./sampling":7,"./server-config":8}],7:[function(a,b,c){b.exports=function(a){var b={};a.sampling=function(c){a.uid;return 1==c?1:"number"==typeof b[c]?b[c]:(b[c]=Math.floor(Math.random()*c),b[c])}}},{}],8:[function(a,b,c){b.exports=function(a){var b,c,d,e,f,g=a._key,h=function(a){var b=document.createElement("script");return b.src=a,document.getElementsByTagName("script")[0].parentNode.appendChild(b),b},i=function(){f||(f=!0,j())},j=function(){var b="//retcode.alicdn.com/retcode/pro/config/"+a.getSpmId()+".js",c=h(b);c.onerror=function(){c.onerror=null,a.error("sys","dynamic config error",b,0),a.ready()}},k=function(){"complete"===document.readyState?i():document.addEventListener?document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,!1),i()},!1):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",arguments.callee),i())}),document.documentElement.doScroll&&"undefined"==typeof window.frameElement&&function(){try{document.documentElement.doScroll("left")}catch(a){return void setTimeout(arguments.callee,0)}i()}(),a.on(window,"load",function(){i()},!0))};if(!g)return 2;try{b=localStorage.getItem(g)}catch(l){b=a.getCookie(g)}return b?(c=a.query.parse(b),selfUpdate=function(){var b=a.ver&&a.ver.split("."),d=c.ver&&c.ver.split(".");if(!b||!d)return!1;for(var e=0,f=b.length;f>e;e++)if(d[e]&&parseInt(b[e],10)<parseInt(d[e],10))return!0;return!1},selfUpdate()?(e="//g.alicdn.com/retcode/log/"+c.ver+"/log.js",d=h(e),d.onload=function(){d.onload=null,a.reloaded()},d.onerror=function(){d.onerror=null,a.error("sys","self update error",e,0),a.reloadFailed()},0):parseInt(c.exp,10)<(new Date).getTime()?(k(),1):(a.setConfig({sample:parseInt(c.sample,10)}),2)):(k(),1)}},{}]},{},[6]);